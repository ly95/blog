<p>没有什么好说的，直接看代码片段。</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">import</span> <span class="kt">SwiftUI</span>

<span class="kd">struct</span> <span class="kt">Message</span><span class="p">:</span> <span class="kt">Identifiable</span><span class="p">,</span> <span class="kt">Equatable</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">id</span><span class="p">:</span> <span class="kt">Int</span>
    <span class="k">let</span> <span class="nv">content</span><span class="p">:</span> <span class="kt">String</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="kt">ContentView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="kd">@State</span> <span class="kd">private</span> <span class="k">var</span> <span class="nv">messages</span><span class="p">:</span> <span class="p">[</span><span class="kt">Message</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="kt">Message</span><span class="p">(</span><span class="nv">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nv">content</span><span class="p">:</span> <span class="s">"hi"</span><span class="p">)]</span>
    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">ScrollView</span> <span class="p">{</span>
            <span class="kt">Button</span><span class="p">(</span><span class="s">"Add message"</span><span class="p">)</span> <span class="p">{</span> 
                <span class="n">messages</span><span class="o">.</span><span class="nf">append</span><span class="p">(</span><span class="kt">Message</span><span class="p">(</span><span class="nv">id</span><span class="p">:</span> <span class="n">messages</span><span class="o">.</span><span class="n">last</span><span class="o">!.</span><span class="n">id</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nv">content</span><span class="p">:</span> <span class="s">"hi"</span><span class="p">))</span>
            <span class="p">}</span><span class="o">.</span><span class="nf">padding</span><span class="p">(</span><span class="o">.</span><span class="n">bottom</span><span class="p">)</span>
            
            <span class="kt">ScrollViewReader</span> <span class="p">{</span> <span class="n">reader</span> <span class="k">in</span>
                <span class="kt">ForEach</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span> <span class="p">{</span> <span class="n">item</span> <span class="k">in</span>
                    <span class="kt">Text</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">id</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
                <span class="p">}</span>
                <span class="kt">EmptyView</span><span class="p">()</span>
                    <span class="o">.</span><span class="nf">onChange</span><span class="p">(</span><span class="nv">of</span><span class="p">:</span> <span class="n">messages</span><span class="p">)</span> <span class="p">{</span> <span class="n">newValue</span> <span class="k">in</span>
                        <span class="n">reader</span><span class="o">.</span><span class="nf">scrollTo</span><span class="p">(</span><span class="n">messages</span><span class="o">.</span><span class="n">last</span><span class="p">?</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="nv">anchor</span><span class="p">:</span> <span class="o">.</span><span class="n">bottom</span><span class="p">)</span>
                    <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
